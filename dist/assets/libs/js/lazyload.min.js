!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).LazyLoad=e()}(this,function(){"use strict";function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n,a=arguments[e];for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}function r(t){return e({},x,t)}function i(t,e){var n,a="LazyLoad::Initialized",e=new t(e);try{n=new CustomEvent(a,{detail:{instance:e}})}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(a,!1,!1,{instance:e})}window.dispatchEvent(n)}function l(t){return P(t)===V}function c(t,e){t&&(t.toLoadCount=e)}function n(t){for(var e,n=[],a=0;e=t.children[a];a+=1)"SOURCE"===e.tagName&&n.push(e);return n}function a(t,e){n(t).forEach(e)}function o(t){return delete t[z]}function s(e,t){var n;et(e)||(n={},t.forEach(function(t){n[t]=e.getAttribute(t)}),e[z]=n)}function u(a,t){var i;et(a)&&(i=nt(a),t.forEach(function(t){var e,n;e=a,(t=i[n=t])?e.setAttribute(n,t):e.removeAttribute(n)}))}function d(t,e,n){n&&t.setAttribute(e,n)}function f(t,e){d(t,C,j(t,e.data_sizes)),d(t,N,j(t,e.data_srcset)),d(t,O,j(t,e.data_src))}function _(t,e){!e||0<e.loadingCount||0<e.toLoadCount||H(t.callback_finish,e)}function g(t,e,n){t.addEventListener(e,n),t.llEvLisnrs[e]=n}function v(t,e,n){delete t.llTempImage,W(n,-1),n&&--n.toLoadCount,J(t,e.class_loading),e.unobserve_completed&&Q(t,n)}function b(t){return t.use_native&&"loading"in HTMLImageElement.prototype}function p(t,s,u){t.forEach(function(t){return t.isIntersecting||0<t.intersectionRatio?(i=t.target,o=t,r=s,l=u,c=0<=q.indexOf(P(i)),S(i,"entered"),B(i,r.class_entered),J(i,r.class_exited),r.unobserve_entered&&Q(i,l),H(r.callback_enter,i,o,l),void(c||ut(i,r,l))):(e=t.target,n=t,a=s,o=u,void($(e)||(B(e,a.class_exited),c=e,i=n,r=o,(l=a).cancel_on_exit&&P(c)===R&&"IMG"===c.tagName&&(ct(c),X(t=c,function(t){dt(t)}),dt(t),ft(c),J(c,l.class_loading),W(r,-1),U(c),H(l.callback_cancel,c,i,r)),H(a.callback_exit,e,n,o))));var e,n,a,i,o,r,l,c})}function h(t){return Array.prototype.slice.call(t)}function m(t){return t.container.querySelectorAll(t.elements_selector)}function E(t){return P(t)===D}function I(t,e){return e=t||m(e),h(e).filter($)}function t(t,e){var a,i,n,o,t=r(t);this._settings=t,this.loadingCount=0,n=t,o=this,k&&!b(n)&&(o._observer=new IntersectionObserver(function(t){p(t,n,o)},{root:n.container===document?null:n.container,rootMargin:n.thresholds||n.threshold+"px"})),a=t,i=this,y&&window.addEventListener("online",function(){var e,t,n;t=i,n=m(e=a),h(n).filter(E).forEach(function(t){J(t,e.class_error),U(t)}),t.update()}),this.update(e)}var y="undefined"!=typeof window,A=y&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),k=y&&"IntersectionObserver"in window,L=y&&"classList"in document.createElement("p"),w=y&&1<window.devicePixelRatio,x={elements_selector:".lazy",container:A||y?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},O="src",N="srcset",C="sizes",M="poster",z="llOriginalAttrs",R="loading",T="loaded",G="applied",D="error",V="native",F="data-",j=function(t,e){return t.getAttribute(F+e)},P=function(t){return j(t,"ll-status")},S=function(t,e){var n;n=t,t="data-ll-status",null!==e?n.setAttribute(t,e):n.removeAttribute(t)},U=function(t){return S(t,null)},$=function(t){return null===P(t)},q=[R,T,G,D],H=function(t,e,n,a){t&&(void 0===a?void 0===n?t(e):t(e,n):t(e,n,a))},B=function(t,e){L?t.classList.add(e):t.className+=(t.className?" ":"")+e},J=function(t,e){L?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},K=function(t){return t.llTempImage},Q=function(t,e){!e||(e=e._observer)&&e.unobserve(t)},W=function(t,e){t&&(t.loadingCount+=e)},X=function(t,e){t=t.parentNode;t&&"PICTURE"===t.tagName&&n(t).forEach(e)},Y=[O],Z=[O,M],tt=[O,N,C],et=function(t){return!!t[z]},nt=function(t){return t[z]},at=function(t,e,n){B(t,e.class_loading),S(t,R),n&&(W(n,1),H(e.callback_loading,t,n))},it={IMG:function(t,e){X(t,function(t){s(t,tt),f(t,e)}),s(t,tt),f(t,e)},IFRAME:function(t,e){s(t,Y),d(t,O,j(t,e.data_src))},VIDEO:function(t,e){a(t,function(t){s(t,Y),d(t,O,j(t,e.data_src))}),s(t,Z),d(t,M,j(t,e.data_poster)),d(t,O,j(t,e.data_src)),t.load()}},ot=["IMG","IFRAME","VIDEO"],rt=function(t,e,n){t.removeEventListener(e,n)},lt=function(t){return!!t.llEvLisnrs},ct=function(t){if(lt(t)){var e,n=t.llEvLisnrs;for(e in n){var a=n[e];rt(t,e,a)}delete t.llEvLisnrs}},st=function(n,a,i){var o=K(n)||n;lt(o)||function(t){lt(t)||(t.llEvLisnrs={});var e="VIDEO"===t.tagName?"loadeddata":"load";g(t,e,function(t){!function(t,e,n,a){var i=l(e);v(e,n,a),B(e,n.class_loaded),S(e,T),H(n.callback_loaded,e,a),i||_(n,a)}(0,n,a,i),ct(o)}),g(t,"error",function(t){!function(t,e,n,a){var i=l(e);v(e,n,a),B(e,n.class_error),S(e,D),H(n.callback_error,e,a),i||_(n,a)}(0,n,a,i),ct(o)})}(o)},ut=function(t,e,n){var a,i,o,r,l;-1<ot.indexOf(t.tagName)?(st(o=t,r=e,a=n),l=r,r=a,(o=it[(a=o).tagName])&&(o(a,l),at(a,l,r))):(i=e,o=n,(a=t).llTempImage=document.createElement("IMG"),st(a,i,o),et(l=a)||(l[z]={backgroundImage:l.style.backgroundImage}),r=o,t=j(e=a,(n=i).data_bg),l=j(e,n.data_bg_hidpi),(t=w&&l?l:t)&&(e.style.backgroundImage='url("'.concat(t,'")'),K(e).setAttribute(O,t),at(e,n,r)),n=o,a=j(r=a,(o=i).data_bg_multi),i=j(r,o.data_bg_multi_hidpi),(a=w&&i?i:a)&&(r.style.backgroundImage=a,n=n,B(r=r,(o=o).class_applied),S(r,G),n&&(o.unobserve_completed&&Q(r,o),H(o.callback_applied,r,n))))},dt=function(t){t.removeAttribute(O),t.removeAttribute(N),t.removeAttribute(C)},ft=function(t){X(t,function(t){u(t,tt)}),u(t,tt)},_t={IMG:ft,IFRAME:function(t){u(t,Y)},VIDEO:function(t){a(t,function(t){u(t,Y)}),u(t,Z),t.load()}},gt=["IMG","IFRAME","VIDEO"];return t.prototype={update:function(t){var e,a,i,n=this._settings,o=I(t,n);c(this,o.length),!A&&k?b(n)?(a=n,i=this,o.forEach(function(t){var e,n;-1!==gt.indexOf(t.tagName)&&(e=a,n=i,(t=t).setAttribute("loading","lazy"),st(t,e,n),(n=it[t.tagName])&&n(t,e),S(t,V))}),c(i,0)):(t=o,(n=this._observer).disconnect(),e=n,t.forEach(function(t){e.observe(t)})):this.loadAll(o)},destroy:function(){this._observer&&this._observer.disconnect(),m(this._settings).forEach(function(t){o(t)}),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var e=this,n=this._settings;I(t,n).forEach(function(t){Q(t,e),ut(t,n,e)})},restoreAll:function(){var i=this._settings;m(i).forEach(function(t){var e,n,a;n=i,(t=_t[(a=e=t).tagName])?t(a):et(t=a)&&(a=nt(t),t.style.backgroundImage=a.backgroundImage),a=n,$(n=e)||l(n)||(J(n,a.class_entered),J(n,a.class_exited),J(n,a.class_applied),J(n,a.class_loading),J(n,a.class_loaded),J(n,a.class_error)),U(e),o(e)})}},t.load=function(t,e){e=r(e);ut(t,e)},t.resetStatus=function(t){U(t)},y&&function(t,e){if(e)if(e.length)for(var n,a=0;n=e[a];a+=1)i(t,n);else i(t,e)}(t,window.lazyLoadOptions),t});